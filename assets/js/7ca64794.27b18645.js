"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8448],{9818:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>_,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>a});var r=n(4848),t=n(8453);const i={},_="ESP_SR\u4f7f\u7528",o={id:"espressif/\u4e2a\u4eba\u5b66\u4e60/\u5916\u8bbe/AUDIO/esp_sr",title:"ESP_SR\u4f7f\u7528",description:"1.\u6dfb\u52a0\u7ec4\u4ef6",source:"@site/docs/espressif/\u4e2a\u4eba\u5b66\u4e60/\u5916\u8bbe/AUDIO/esp_sr.md",sourceDirName:"espressif/\u4e2a\u4eba\u5b66\u4e60/\u5916\u8bbe/AUDIO",slug:"/espressif/\u4e2a\u4eba\u5b66\u4e60/\u5916\u8bbe/AUDIO/esp_sr",permalink:"/docs/espressif/\u4e2a\u4eba\u5b66\u4e60/\u5916\u8bbe/AUDIO/esp_sr",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/espressif/\u4e2a\u4eba\u5b66\u4e60/\u5916\u8bbe/AUDIO/esp_sr.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u767e\u5ea6\u8bed\u97f3\u5408\u6210",permalink:"/docs/espressif/\u4e2a\u4eba\u5b66\u4e60/\u5916\u8bbe/AUDIO/baidu_tts"},next:{title:"WAV\u683c\u5f0f",permalink:"/docs/espressif/\u4e2a\u4eba\u5b66\u4e60/\u5916\u8bbe/AUDIO/wav_formate"}},l={},a=[{value:"1.\u6dfb\u52a0\u7ec4\u4ef6",id:"1\u6dfb\u52a0\u7ec4\u4ef6",level:3}];function d(e){const s={a:"a",code:"code",h1:"h1",h3:"h3",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{id:"esp_sr\u4f7f\u7528",children:"ESP_SR\u4f7f\u7528"}),"\n",(0,r.jsx)(s.h3,{id:"1\u6dfb\u52a0\u7ec4\u4ef6",children:"1.\u6dfb\u52a0\u7ec4\u4ef6"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:'idf.py add-dependency "espressif/esp-sr^1.6.1"\n'})}),"\n",(0,r.jsx)(s.p,{children:"\u9700\u8981\u7ed9sr_model\u6dfb\u52a0\u4e00\u4e2a\u5206\u533a\uff0c\u53c2\u8003\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://github.com/espressif/esp-sr/blob/master/docs/zh_CN/flash_model/README.rst#id7",children:"https://github.com/espressif/esp-sr/blob/master/docs/zh_CN/flash_model/README.rst#id7"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-csv",children:"# Espressif ESP32 Partition Table\r\n# Name,  Type, SubType, Offset,  Size\r\nfactory, app,  factory, 0x010000, 2500k\r\nmodel,  data, spiffs,         , 5168K,\n"})}),"\n",(0,r.jsx)(s.p,{children:"\u8bb0\u5f97\u5199sdkconfig.defaults"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:'CONFIG_ESPTOOLPY_FLASHMODE_QIO=y\r\nCONFIG_ESPTOOLPY_FLASHSIZE_16MB=y\r\nCONFIG_PARTITION_TABLE_CUSTOM=y\r\nCONFIG_PARTITION_TABLE_CUSTOM_FILENAME="partitions.csv"\r\nCONFIG_PARTITION_TABLE_FILENAME="partitions.csv"\r\nCONFIG_PARTITION_TABLE_OFFSET=0x8000\r\nCONFIG_ESP32S3_DEFAULT_CPU_FREQ_240=y\r\nCONFIG_ESP32S3_INSTRUCTION_CACHE_32KB=y\r\nCONFIG_ESP32S3_DATA_CACHE_64KB=y\r\nCONFIG_ESP32S3_DATA_CACHE_LINE_64B=y\r\nCONFIG_ESP32S3_SPIRAM_SUPPORT=y\r\nCONFIG_SPIRAM_MODE_OCT=y\r\nCONFIG_SPIRAM_SPEED_80M=y\r\n# CONFIG_ESP_SYSTEM_PANIC_PRINT_HALT is not set\r\nCONFIG_ESP_SYSTEM_PANIC_PRINT_REBOOT=y\r\n# CONFIG_ESP_SYSTEM_PANIC_SILENT_REBOOT is not set\r\n# CONFIG_ESP_SYSTEM_PANIC_GDBSTUB is not set\r\n# CONFIG_ESP_SYSTEM_GDBSTUB_RUNTIME is not set\r\nCONFIG_ESP_SYSTEM_RTC_FAST_MEM_AS_HEAP_DEPCHECK=y\r\nCONFIG_ESP_SYSTEM_ALLOW_RTC_FAST_MEM_AS_HEAP=y\n'})}),"\n",(0,r.jsx)(s.p,{children:"\u7136\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u770b\u5230\u751f\u6210\u4e86srmodel.bin"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:"Project build complete. To flash, run:\r\n idf.py flash\r\nor\r\n idf.py -p PORT flash\r\nor\r\n python -m esptool --chip esp32s3 -b 460800 --before default_reset --after hard_reset write_flash --flash_mode dio --flash_size 8MB --flash_freq 80m 0x0 build/bootloader/bootloader.bin 0x8000 build/partition_table/partition-table.bin 0x10000 build/esp_voice_activated_light.bin 0x312000 build/srmodels/srmodels.bin\n"})}),"\n",(0,r.jsx)(s.p,{children:"\u6211\u4eec\u5728\u7a0b\u5e8f\u4e2d\u5c31\u6ca1\u5fc5\u8981\u6302\u8f7dspiffs\u4e2d\u7684model\u90a3\u4e2alabel\u4e86\uff0c\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e2a\u4ee3\u7801\u5c31\u53ef\u4ee5\u627e\u5230\u6a21\u578b\u3002\u5982\u679c\u5199spiffs\u6302\u8f7d\u7684\u8bdd\uff0c\u6211\u4e00\u76f4\u6ca1\u6210\u529f\u8fc7"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-c",children:'models = esp_srmodel_init(model_partition_label);\r\nchar *wn_name = NULL;\r\nif (models != NULL)\r\n{\r\n    for (int i = 0; i < models->num; i++)\r\n    {\r\n        if (strstr(models->model_name[i], ESP_WN_PREFIX) != NULL)\r\n        {\r\n            if (wn_name == NULL)\r\n            {\r\n                wn_name = models->model_name[i];\r\n                ESP_LOGI(TAG, "The wakenet model: %s", wn_name);\r\n            }\r\n        }\r\n    }\r\n}\r\nelse\r\n{\r\n    ESP_LOGI(TAG, "Please enable wakenet model and select wake word by menuconfig!");\r\n    return ESP_FAIL;\r\n}\n'})}),"\n",(0,r.jsx)(s.p,{children:"\u8fd9\u91cc\u9762\u7684model_partition_label\u6211\u4eec\u5c31\u5199model\uff0c\u8fd9\u4e00\u5757\u662f\u8981\u548c\u6211\u4eec\u5199\u7684\u5206\u533a\u8868\u4fdd\u6301\u4e00\u81f4\uff0c\u5c31\u662f\u90a3\u4e2amodel"})]})}function c(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>_,x:()=>o});var r=n(6540);const t={},i=r.createContext(t);function _(e){const s=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:_(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);