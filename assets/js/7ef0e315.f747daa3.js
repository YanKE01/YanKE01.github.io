"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1415],{7677:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>o,contentTitle:()=>a,default:()=>l,frontMatter:()=>u,metadata:()=>i,toc:()=>c});var n=t(4848),s=t(8453);const u={},a="UART \u9a71\u52a8",i={id:"espressif/\u4e2a\u4eba\u5b66\u4e60/IDF/uart\u9a71\u52a8",title:"UART \u9a71\u52a8",description:"\u5728commit 33b99ca \u4e2d\u7684esperrt uartflushinput(uartportt uartnum)\u589e\u52a0\u4e86\u5bf9rxbuffer_len\u7684\u6e05\u7a7a\u64cd\u4f5c\uff1a",source:"@site/docs/espressif/\u4e2a\u4eba\u5b66\u4e60/IDF/uart\u9a71\u52a8.md",sourceDirName:"espressif/\u4e2a\u4eba\u5b66\u4e60/IDF",slug:"/espressif/\u4e2a\u4eba\u5b66\u4e60/IDF/uart\u9a71\u52a8",permalink:"/docs/espressif/\u4e2a\u4eba\u5b66\u4e60/IDF/uart\u9a71\u52a8",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/espressif/\u4e2a\u4eba\u5b66\u4e60/IDF/uart\u9a71\u52a8.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"esp_jpeg\u7ec4\u4ef6\u89e3\u6790\u56fe\u7247",permalink:"/docs/espressif/\u4e2a\u4eba\u5b66\u4e60/IDF/st7789v_jpeg_decode"},next:{title:"Websocket\u670d\u52a1\u5668",permalink:"/docs/espressif/\u4e2a\u4eba\u5b66\u4e60/IDF/websocket_server"}},o={},c=[];function _(e){const r={code:"code",h1:"h1",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h1,{id:"uart-\u9a71\u52a8",children:"UART \u9a71\u52a8"}),"\n",(0,n.jsx)(r.p,{children:"\u5728commit 33b99ca \u4e2d\u7684esp_err_t uart_flush_input(uart_port_t uart_num)\u589e\u52a0\u4e86\u5bf9rx_buffer_len\u7684\u6e05\u7a7a\u64cd\u4f5c\uff1a"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-c",children:'        if(data == NULL) {\r\n            if( p_uart_obj[uart_num]->rx_buffered_len != 0 ) {\r\n                ESP_LOGE(UART_TAG, "rx_buffered_len error");\r\n                p_uart_obj[uart_num]->rx_buffered_len = 0;\r\n            }\r\n            //We also need to clear the `rx_buffer_full_flg` here.\r\n            UART_ENTER_CRITICAL(&uart_spinlock[uart_num]);\r\n            p_uart_obj[uart_num]->rx_buffer_full_flg = false;\r\n            UART_EXIT_CRITICAL(&uart_spinlock[uart_num]);\r\n            break;\r\n        }\r\n\n'})}),"\n",(0,n.jsxs)(r.p,{children:["commit\u7684\u63cf\u8ff0\u662f\uff1adriver(uart)",":Fix"," the bug that uart buffer_full flag is true all the time."]}),"\n",(0,n.jsxs)(r.p,{children:["\u4ee5\u4e0b\u662f\u66f4\u65b0",(0,n.jsx)(r.code,{children:"rx_buffered_len"}),"\u7684\u5730\u65b9\uff1a"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-c",children:"static void UART_ISR_ATTR uart_rx_intr_handler_default(void *param);\r\nint uart_read_bytes(uart_port_t uart_num, void *buf, uint32_t length, TickType_t ticks_to_wait);\r\n\n"})})]})}function l(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(_,{...e})}):_(e)}},8453:(e,r,t)=>{t.d(r,{R:()=>a,x:()=>i});var n=t(6540);const s={},u=n.createContext(s);function a(e){const r=n.useContext(u);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(u.Provider,{value:r},e.children)}}}]);