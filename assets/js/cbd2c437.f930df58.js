"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7733],{7553:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>d});var t=n(4848),a=n(8453);const s={},o="\u4f7f\u7528python\u83b7\u53d6\u7a0b\u5e8fram\u4f7f\u7528\u60c5\u51b5",i={id:"graduate/python_ram_usage",title:"\u4f7f\u7528python\u83b7\u53d6\u7a0b\u5e8fram\u4f7f\u7528\u60c5\u51b5",description:"1.\u73af\u5883\u914d\u7f6e",source:"@site/docs/graduate/python_ram_usage.md",sourceDirName:"graduate",slug:"/graduate/python_ram_usage",permalink:"/docs/graduate/python_ram_usage",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/graduate/python_ram_usage.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u5c40\u57df\u7f51\u4e0b\u83b7\u53d6\u6811\u8393\u6d3e\u4e3b\u673a\u5730\u5740",permalink:"/docs/linux/\u6811\u8393\u6d3e/\u83b7\u53d6\u4e3b\u673a\u5730\u5740"},next:{title:"simwindfarm\u95ee\u9898\u603b\u7ed3",permalink:"/docs/graduate/simwindfarm_question"}},l={},d=[{value:"1.\u73af\u5883\u914d\u7f6e",id:"1\u73af\u5883\u914d\u7f6e",level:2},{value:"2.\u57fa\u672c\u4f7f\u7528",id:"2\u57fa\u672c\u4f7f\u7528",level:2},{value:"2.1 \u4fee\u9970\u4f7f\u7528",id:"21-\u4fee\u9970\u4f7f\u7528",level:3},{value:"2.2 \u547d\u4ee4\u884c",id:"22-\u547d\u4ee4\u884c",level:3}];function c(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h1,{id:"\u4f7f\u7528python\u83b7\u53d6\u7a0b\u5e8fram\u4f7f\u7528\u60c5\u51b5",children:"\u4f7f\u7528python\u83b7\u53d6\u7a0b\u5e8fram\u4f7f\u7528\u60c5\u51b5"}),"\n",(0,t.jsx)(r.h2,{id:"1\u73af\u5883\u914d\u7f6e",children:"1.\u73af\u5883\u914d\u7f6e"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-shell",children:"pip install memory_profiler\n"})}),"\n",(0,t.jsx)(r.h2,{id:"2\u57fa\u672c\u4f7f\u7528",children:"2.\u57fa\u672c\u4f7f\u7528"}),"\n",(0,t.jsx)(r.h3,{id:"21-\u4fee\u9970\u4f7f\u7528",children:"2.1 \u4fee\u9970\u4f7f\u7528"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-shell",children:'from memory_profiler import profile\r\n\r\n@profile()\r\ndef single_predict(x,model):\r\n    result = model.predict(x)\r\n    print(result)\r\n\r\nif __name__ == \'__main__\':\r\n    feature, label = DataGenerateOnehotShuffle("data/mzp_data_c10_stride1000.csv", num_class=10)\r\n    pid = os.getpid()\r\n    process = psutil.Process(pid)\r\n    model = tf.keras.models.load_model("log/2048_model/weights-improvement-606-0.9876.h5")\r\n\r\n    x,y = feature[0],label[0]\r\n    x = np.expand_dims(x, axis=0)\r\n    single_predict(x,model)\n'})}),"\n",(0,t.jsx)(r.h3,{id:"22-\u547d\u4ee4\u884c",children:"2.2 \u547d\u4ee4\u884c"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-shell",children:"mprof run predict.py\r\nmprof plot mprofile_20240305162813.dat\n"})}),"\n",(0,t.jsx)(r.p,{children:"\u5728dat\u6587\u4ef6\u4e2d\uff0c\u7b2c\u4e00\u5217\u4e3aRAM\uff0c\u7b2c\u4e8c\u5217\u4e3a\u65f6\u95f4\u6233"})]})}function p(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>i});var t=n(6540);const a={},s=t.createContext(a);function o(e){const r=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);